(this["webpackJsonpfarma-prom-book-app"]=this["webpackJsonpfarma-prom-book-app"]||[]).push([[0],{17:function(t,o,e){t.exports={"app-header":"Header_app-header__3VeaE","app-header-block":"Header_app-header-block__W_cZ8","app-header-block-logo":"Header_app-header-block-logo__3Madj","app-header-block-logo-name":"Header_app-header-block-logo-name__2zhDz"}},24:function(t,o,e){t.exports={link:"GoBackToBooksListButton_link__2vsCq",active:"GoBackToBooksListButton_active__2y7-Z",arrow:"GoBackToBooksListButton_arrow__CskHR"}},25:function(t,o,e){t.exports={app:"Layout_app__3iHya","book-list":"Layout_book-list__3Bqd2","book-details":"Layout_book-details__2RAy2"}},26:function(t,o,e){t.exports={notification:"Notification_notification__2QtJv",error:"Notification_error__zWtTG",success:"Notification_success__2PruW"}},4:function(t,o,e){t.exports={book:"Book_book__1Pflz","book-download":"Book_book-download__2X1no","book-top":"Book_book-top__O0kbT","book-top-title":"Book_book-top-title__29JQ0","book-top-title-details":"Book_book-top-title-details__SYAk-","book-top-subtitle":"Book_book-top-subtitle__32bsm","book-image":"Book_book-image__spobu","book-authors":"Book_book-authors__3BmpD","book-description":"Book_book-description__3mBbE"}},43:function(t,o,e){t.exports={"books-list":"BooksList_books-list__1M3OU"}},47:function(t,o,e){t.exports={nav:"MainNavigation_nav__Z1aQ-"}},57:function(t,o,e){},86:function(t,o,e){"use strict";e.r(o);var a=e(20),n=e.n(a),c=e(5),i=e(16),s=e(42),l=e(27),r=e(11),b="ADD_BOOKS_TO_BOOK_LIST",u="SET_LOADING_BOOKS_LIST_DATA_STATUS",d="SET_LOADING_BOOK_DETAILS_DATA_STATUS",j="INCREMENT_START_INDEX",p="SET_NOTIFICATION",h={startIndex:0,booksPerFetch:15,loadingBooksListData:!0,loadingBookDetailsData:!0};var k,O=Object(i.b)({booksOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case u:return Object(r.a)(Object(r.a)({},t),{},{loadingBooksListData:o.payload});case d:return Object(r.a)(Object(r.a)({},t),{},{loadingBookDetailsData:o.payload});case b:var e=t.bookList?[].concat(Object(l.a)(t.bookList),Object(l.a)(o.payload)):o.payload,a=Object(l.a)(new Set(e.map((function(t){return t.id})))).map((function(t){return e.find((function(o){return o.id===t}))}));return Object(r.a)(Object(r.a)({},t),{},{bookList:a});case j:return Object(r.a)(Object(r.a)({},t),{},{startIndex:t.startIndex+=t.booksPerFetch});default:return t}},notification:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return o.type===p?t=o.payload:t}}),m=(e(57),e(0)),f=e(12),_=e(3),v=e(43),x=e.n(v),g=e(4),B=e.n(g),N=e(1),T=function(t){var o=t.title,e=t.subtitle,a=t.authors,n=t.publishedDate,c=t.description,i=t.smallThumbnail,s=t.id,l=null===a||void 0===a?void 0:a.reduce((function(t,o){return"".concat(t,", ").concat(o)}));return Object(N.jsxs)("li",{className:B.a.book,children:[Object(N.jsx)("img",{className:B.a["book-image"],alt:"Book",src:i}),Object(N.jsxs)("div",{className:B.a["book-top"],children:[Object(N.jsx)(f.b,{to:"/book/".concat(s),className:B.a["book-top-title"],children:o}),e?Object(N.jsx)("p",{className:B.a["book-top-subtitle"],children:e}):Object(N.jsx)("p",{className:B.a["book-top-subtitle"],children:"See detailed description below."})]}),Object(N.jsx)("h5",{className:B.a["book-authors"],children:"".concat(l," (").concat(n,")")}),Object(N.jsx)("p",{className:B.a["book-description"],children:c})]})},D=e(30),I=e(45),y=e(31),L=e(46),A=e.n(L);var S=function(t){var o=t.loading,e=Object(y.css)(k||(k=Object(I.a)(["\n    display: block;\n    margin: 2rem auto;\n  "])));return Object(N.jsx)(A.a,{loading:o,css:e,size:100})},w=e(22),E=e.n(w),F="https://www.googleapis.com/books/v1/volumes?q=subject:",H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fiction",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e="".concat(F).concat(t,"&startIndex=").concat(o,"&maxResults=").concat(15);return E.a.get(e).then((function(t){var o;return null===(o=t.data)||void 0===o?void 0:o.items.map((function(t){return{title:t.volumeInfo.title,subtitle:t.volumeInfo.subtitle,authors:t.volumeInfo.authors,publishedDate:t.volumeInfo.publishedDate,description:t.volumeInfo.description,smallThumbnail:t.volumeInfo.imageLinks.smallThumbnail,id:t.id}}))}))},P=function(t){return{type:p,payload:t}},G=function(t,o,e){return function(a){a(z(!0)),H(t,o,e).then((function(t){a(R(t)),a(P({isActive:!0,status:"success",title:"Book list fetched."})),a(z(!1)),a(K())})).catch((function(t){a(P({isActive:!0,status:"error",title:"Problem with fetching book list."})),a(z(!1))}))}},R=function(t){return{type:b,payload:t}},z=function(t){return{type:u,payload:t}},C=function(t){return{type:d,payload:t}},K=function(t){return{type:j,payload:t}},M=function(t){var o=t.booksOptions;return null===o||void 0===o?void 0:o.loadingBookDetailsData},J=function(t){return t.booksOptions.bookList},W=function(t){return t.notification},q=function(t){return t.booksOptions.startIndex},Q=function(){var t=Object(c.b)(),o=Object(c.c)(M),e=Object(c.c)(J);return Object(m.useEffect)((function(){e||t(G())}),[t,e]),Object(N.jsx)(D.Fragment,{children:Object(N.jsxs)("ul",{className:x.a["books-list"],children:[null===e||void 0===e?void 0:e.map((function(t){return Object(N.jsx)(T,{title:t.title,subtitle:t.subtitle,authors:t.authors,publishedDate:t.publishedDate,description:t.description,smallThumbnail:t.smallThumbnail,id:t.id},t.id)})),Object(N.jsx)(S,{loading:o})]})})},U=e(23),Z=e(17),X=e.n(Z),V=e.p+"static/media/logo_pl.5558c896.png",Y=function(){return Object(N.jsxs)("header",{className:X.a["app-header"],children:[Object(N.jsx)("h2",{children:"This is recruitment task for Farma Prom company."}),Object(N.jsxs)("div",{className:X.a["app-header-block"],children:[Object(N.jsx)("img",{src:V,alt:"Leocode logo",className:X.a["app-header-block-logo"]}),Object(N.jsx)("div",{className:X.a["app-header-block-logo-name"],children:"Book App"})]})]})},$=e(48),tt=e(24),ot=e.n(tt),et=function(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(f.b,{to:"/",activeClassName:ot.a.link.active,className:ot.a.link,children:[Object(N.jsx)($.a,{className:ot.a.arrow}),Object(N.jsx)("span",{children:"Books List"})]})})},at=e(47),nt=e.n(at),ct=function(){return Object(N.jsx)("nav",{className:nt.a.nav,children:Object(N.jsx)(et,{})})},it=e(25),st=e.n(it),lt=e(26),rt=e.n(lt),bt=function(t){var o=t.status,e=t.title,a=t.message,n=Object(c.b)(),i="";"error"===o&&(i=rt.a.error),"success"===o&&(i=rt.a.success,setTimeout((function(){n(P({isActive:!1}))}),1e3));var s="".concat(rt.a.notification," ").concat(i);return Object(N.jsxs)("section",{className:s,children:[Object(N.jsx)("h2",{children:e}),Object(N.jsx)("p",{children:a})]})},ut=function(t){var o=t.children,e=Object(_.h)().pathname,a=Object(m.useRef)(),n=Object(c.b)(),i=Object(m.useState)(!1),s=Object(U.a)(i,2),l=s[0],r=s[1],b=Object(c.c)(W),u=b.isActive,d=b.status,j=b.title,p=Object(c.c)(q),h="/"===e,k=h?st.a["book-details"]:st.a["book-list"];return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{className:st.a.app,onScroll:function(){var t=a.current,o=t.scrollTop,e=t.scrollHeight,c=t.clientHeight;a.current&&(o+c>=e-c/4&&h&&!l&&(r(!0),n(z(!0)),n(G("fiction",p)),n(K()),setTimeout((function(){r(!1)}),5e3)))},ref:a,children:[Object(N.jsx)(Y,{}),u&&Object(N.jsx)(bt,{status:d,title:j}),!h&&Object(N.jsx)(ct,{}),Object(N.jsx)("main",{className:k,children:o})]})})},dt=function(t){return E.a.get("https://www.googleapis.com/books/v1/volumes/"+t).then((function(t){return t.data})).then((function(t){var o,e,a=null===(o=t.volumeInfo.authors)||void 0===o?void 0:o.reduce((function(t,o){return"".concat(t,", ").concat(o)}));return{title:t.volumeInfo.title,subtitle:t.volumeInfo.subtitle||null,authors:a,publishedDate:t.volumeInfo.publishedDate,description:t.volumeInfo.description||null,thumbnail:(null===(e=t.volumeInfo.imageLinks)||void 0===e?void 0:e.thumbnail)||null,acsTokenLink:t.accessInfo.epub.acsTokenLink||null,publicDomain:t.accessInfo.publicDomain,id:t.id}}))},jt=function(){var t=Object(c.b)(),o=Object(_.i)(),e=Object(c.c)((function(t){var o=t.booksOptions;return null===o||void 0===o?void 0:o.loadingBookDetailsData})),a=Object(c.c)((function(t){return"error"!==t.notification.status})),n=Object(_.g)();a||n.goBack();var i=Object(m.useState)({title:"",subtitle:"",authors:"",publishedDate:"",description:"",thumbnail:"",acsTokenLink:"",publicDomain:"",id:""}),s=Object(U.a)(i,2),l=s[0],r=s[1],b=o.bookId,u=l.title,d=l.subtitle,j=l.authors,p=l.publishedDate,h=l.description,k=l.thumbnail,O=l.acsTokenLink,f=l.publicDomain;return Object(m.useEffect)((function(){t(C(!0)),dt(b).then((function(o){r(o),t(P({isActive:!0,status:"success",title:"Book details fetched."})),t(C(!1))})).catch((function(){t(P({isActive:!0,status:"error",title:"Problem with fetching book details."})),t(C(!1))}))}),[t,b]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(S,{loading:e}),!e&&a&&Object(N.jsxs)("div",{className:B.a.book,children:[Object(N.jsx)("img",{className:B.a["book-image"],alt:"Book",src:k}),Object(N.jsxs)("div",{className:B.a["book-top"],children:[Object(N.jsx)("p",{className:B.a["book-top-title-details"],children:u}),Object(N.jsx)("p",{className:B.a["book-top-subtitle"],children:d})]}),Object(N.jsx)("h5",{className:B.a["book-authors"],children:"".concat(j," (").concat(p,")")}),"string"===typeof O&&f&&Object(N.jsx)("a",{href:O,className:B.a["book-download"],children:"DOWNLOAD BOOK"}),Object(N.jsx)("div",{dangerouslySetInnerHTML:{__html:h}})]})]})},pt=function(){return Object(N.jsx)(f.a,{children:Object(N.jsx)(ut,{children:Object(N.jsxs)(_.d,{children:[Object(N.jsx)(_.b,{path:"/FarmaProm-book-app",exact:!0,children:Object(N.jsx)(_.a,{to:"/"})}),Object(N.jsx)(_.b,{path:"/",exact:!0,children:Object(N.jsx)(Q,{})}),Object(N.jsx)(_.b,{path:"/book/:bookId",children:Object(N.jsx)(jt,{})})]})})})},ht=Object(i.c)(O,Object(i.a)(s.a));n.a.render(Object(N.jsxs)(c.a,{store:ht,children:[Object(N.jsx)(pt,{}),","]}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.943b7454.chunk.js.map